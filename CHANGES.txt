Changelog and contributors list
===============================


Version 4.3.1 (Release Date: 09/10/2022)
----------------------------------------

* Fixed syntax errors caused by missing closing closures,
* Removed some unused code.

Contributors:

* iionly

Version 4.3.0 (Release Date: 08/10/2022)
----------------------------------------

* Updated for Elgg 4.3,
* Fixed deprecation issues,
* Fixed download url of images in their title menu entry,
* Dutch translations added (thanks to Jan Storms).

Contributors:

* iionly
* Jan Storms

Version 4.2.0 (Release Date: 29/05/2022)
----------------------------------------

* Minimum Elgg version required is Elgg 4.2.0,
* Updated for Elgg 4.2,
* Getting HTML5 uploader working again due to BC breaking changes in jquery-ui in Elgg core,
* Fixed deprecation issues.

Contributors:

* iionly

Version 4.0.1 (Release Date: 15/05/2022)
----------------------------------------

* Fix: not using class constants in elgg-plugin.php as it totally fucks up the site on activating / deactivating Tidypics,
* Migrating all libraries into classes.

Contributors:

* iionly

Version 4.0.0 (Release Date: 15/05/2022)
----------------------------------------

* Minimum Elgg version required is Elgg 4.0.0,
* Updated for Elgg 4.

Contributors:

* iionly

Version 3.3.4 (Release Date: 15/05/2022)
----------------------------------------

* Fixed: no longer use deprecated elgg_group_gatekeeper() function on fetching group images for slideshow,
* Fixed: use correct language string for "Photos you are tagged in" page.

Contributors:

* iionly

Version 3.3.3 (Release Date: 14/11/2021)
----------------------------------------

* Fixed: show HTML5 uploader in user's language if different from site language (former way of fixing stuff of Elgg API deprecated with Elgg 3.1 didn't work as intended as caching different languages failed to work).

Contributors:

* iionly

Version 3.3.2 (Release Date: 14/02/2021)
----------------------------------------

* Fixed: Display of Friend's Photos tab now working correctly,
* French translation updated.

Contributors:

* iionly
* danhype

Version 3.3.1 (Release Date: 29/08/2020)
----------------------------------------

* Fixed: Download link does really downloading the image instead of showing inline.

Contributors:

* iionly

Version 3.3.0 (Release Date: 23/08/2020)
----------------------------------------

* Minimum Elgg version required is Elgg 3.3.0,
* Updated for Elgg 3.3.

Contributors:

* iionly

Version 3.0.0 (Release Date: 23/08/2020)
----------------------------------------

* Minimum Elgg version required is Elgg 3.0.0,
* Updated for Elgg 3,
* Never used migration.php lib removed (idea was to allow for migration of images uploaded with the Elgg core Files plugin to Tidypics - maybe will re-implemented and made working at a later time).

Contributors:

* iionly
* rohit1290

Version 2.3.7 (Release Date: 23/08/2020)
----------------------------------------

* Old upgrade scripts (which were necessary during Tidypics 1.x upgrades) removed. Either you had run them back then when your site was still on Elgg 1.x or you would never have needed them if you started your site with a more recent version of Tidypics... sadly a new upgrade script became necessary (see below in Changelog; please go to the Tidypics plugin settings page where you'll find the "Upgrade" link on top to run the script),
* Little changes in resource listing views for improved loading performance (hopefully),
* New plugin option to enable / disable the sidebar menu entries of Tidypics ("Recently viewed photos" etc.),
* Webp image format support - BUT ONLY WORKS with Image Magick executable image library!
* Restored functionality of resize all thumbnail routine on Tidypics settings page (was broken on Elgg 2.x so far),
* Updated Galleria slideshow script to version 1.6.1,
* Improved "responsiveness" of image displayed in lightbox popups on activity page,
* If (optionally) Widget Pack and/or Group Tools plugins are used require Tidypics to be below these plugins in plugin list to allow for overriding index page and group profile page activity widgets for the Tidypics image popup to work,
* Fixed (optional) display of preview image in river entry when commenting on image (please go to the Tidypics plugin settings page and run the update to fix existing river entries!).

Contributors:

* iionly

Version 2.3.6 (Release Date: 16/09/2018)
----------------------------------------

* Fix: edit album page access fixed so you can edit an album again,
* Fix: redirect on create thumbnail admin action on calling page.

Contributors:

* iionly

Version 2.3.5 (Release Date: 07/07/2018)
----------------------------------------

* Fix: plugin settings action override (correctly save all settings including thumbnail image sizes),
* Fix: caching of plupload uploader language files.

Contributors:

* iionly

Version 2.3.4 (Release Date: 20/05/2018)
----------------------------------------

* Requires PHP 5.6 (for the new slideshow),
* General code cleanup and restructuring (bringing it up to date with some new stuff of Elgg 2.3 API),
* Action error and success handling: updated to new Elgg API functions were appropriate,
* JS: usage of new elgg/Ajax AMD module methods for action handling,
* Fixed display of errors occuring during uploads when using Plupload HTML5/HTML4 uploader,
* Rewritten forms and usage of Elgg API for input fields including making use of HTML5/CSS3 required attribute where appropriate,
* Rewritten and reordered settings page/tabs,
* Rewritten and expanded layout for image popups on activity page,
* Replaced PiclensLite slideshow with Galleria-based slideshow (responsive, no Flash required but HTML5/CSS3 only, ajax-loading of images dynamically),
* Changed widget edit view number of item input field from a select to a number input field on all widgets,
* No access (no download) of original image anymore if watermarking is enabled (original image doesn't get watermarked so making it available contradicts watermarking; no longer offering the original image also means no image popup in full-size image view anymore),
* Fixed usage of imagick image library usage when watermarking is enabled,
* Fixed "Latest Photos" group widget to display photos again also for users who are allowed to add photos (i.e. who get the "Upload Photos" link displayed); thanks to Pasley70 for reporting the issue,
* Fixed alignment of image thumbnails in river entries (also with thumbnails shown in more than 1 row),
* Fixed display of PHP Warning: exif_read_data(...): Illegal IFD size,
* New plugin option for river activity to configure number of images to show at maximum on creation of a new album if option to display a set of images is selected,
* New plugin option for river activity to enable/disable creation of river entries on tagging of images (no influence on existing river entries),
* PHP 7.2 compatibility: modified TidypicsAlbum and TidypicsImage delete method declaration to be compatible with parent class delete method declaration,
* French translation updated and completed thanks to BenaeSan.

Contributors:

* iionly
* Matt Beckett
* BenaeSan


Version 2.3.3 (Release Date: 08/01/2017)
----------------------------------------

* Requires Elgg 2.3.0 at minimum,
* Fixed deprecation issue with $autofeed by using elgg_register_rss_link(),
* Fixed issue in shortening of image / album names in gallery views and album selection on image upload showing up for UTF-8 characters (e.g. cyrilic),
* Increased max. length of image /albums names in gallery views from 17 to 29,
* Fixed error on most commented images page caused by an duplicate $ in a variable name,
* Delayed display of album selection popup (click will only work after page has fully loaded to avoid "Page not found" error due to lightbox JS code not yet loaded),
* No longer load lightbox JS and CSS because it's loaded by Elgg core everywhere anyway now.

Contributors:

* iionly


Version 2.0.2 (Release Date: 28/09/2016)
----------------------------------------

* Support for animated gif thumbnail creation when using Imagick php extension as image library,
* New setting for thumbnail sizes to allow for creation of square-cut / non-square-cut thumbnails images: NOTICE: the CSS of Tidypics is for usage of the default thumbnail size settings, i.e. if you make any changes in the thumbnail settings you will very, very likely need to make also modifications is Tidypics' CSS or the layout will look faulty,
* New option to allow for client-side image size reduction before upload (EXPERIMENTAL! Only for HTML5 uploader),
* New option to allow for client-side removal of exif data (EXPERIMENTAL! Only for HTML5 uploader AND with image size reduction option enabled),
* Check for valid subtype of the entities processed in Tidypics pagehandler views,
* On re-creation of image thumbnails also check if image is included in album image order array and add guid if not,
* Check previous and next image links are valid before displaying navigation elements in image full view,
* Re-work of permission check that evaluates if a user is allowed to upload photos (both in and out of group context) and determines if the "Upload photos" button is shown or not,
* On retrieval of exif data don't expect all sections exists in an image file: check first to avoid php warnings,
* Updated Plupload HTML5/HTML4 uploader to version 2.1.9,
* Improved caching of JS and CSS (and other files) of 3rd party scripts used by Tidypics,
* When using the Widget Manager plugin display/not display Tidypics group widgets according to each groups' settings.

Contributors:

* iionly
* Ismayil Khayredinov


Version 2.0.1 (Release Date: 05/07/2016)
----------------------------------------

* Adding coalense parameter to resizing command of ImageMagick convert command to get animated gifs correctly resized,
* Replacing usage of eregi_replace() function (deprecated in php 5.3 and removed in php 7.0) with preg_replace(),
* Only process image orientation correction for images of formats jpeg and pjpeg to avoid error due to missing exif information for other formats that don't support exif,
* Register tidypics_batch entity subtype for search (but do not return any tidypics_batch content in a search) because only registered subtypes can be selected in activity page content filter menu,
* Finnish translations for the basic features added,
* Correctly load and use Markdown lib of Elgg v2 on plugin settings page tabs,
* Fixed access to "Photos you're tagged in" page to work again on Elgg 2.X.

Contributors:

* iionly
* Juho Jaakkola


Version 2.0.0 (Release Date: 15/11/2015)
----------------------------------------

* Allow for liking of albums and images (must be enabled explicitly on Elgg 2.0),
* Usage of resource views (introduced in Elgg 2.0),
* Usage of elgg_get_simplecache_url() (introduced in Elgg 2.0) where appropriate.

Contributors:

* iionly


Version 1.10.8 (Release Date: 15/11/2015)
-----------------------------------------

* Updated Plupload HTML5/HTML4 uploader to version 2.1.8,
* New plugin setting to define maximum number of images allowed to be uploaded in one batch,
* New plugin setting to set the forward of the site menu entry ("All photos" or "All photo albums"),
* New plugin setting for perfoming some optimizations on creation of image thumbnails that should result in smaller filesize. Works only with ImageMagick command line tools used as Image library,
* "is_trusted" attribute added to navigation arrows (previous/next image) when viewing an image,
* extract GPS location data from images on upload if available (location data is not yet used by Tidypics itself but it is of use in case you use the jssor slideshow plugin available at https://elgg.org/plugins/2272330),
* New tool on "Delete image" tab of Tidypics plugin settings to allow searching for and deletion of image entries that have no longer their image files in the data directory (e.g. part of data directory got lost). Use with this tool with care!!!

Contributors:

* iionly
* Matt Beckett
* sh3llc0de


Version 1.10.7 (Release Date: 15/08/2015)
-----------------------------------------

* Moved all JS code into AMD modules,
* Updated Plupload HTML5/HTML4 uploader to version 4.1.7,
* Updated jquery-ui-smoothness theme used by Plupload to 1.11.4,
* Increase of z-index of slideshow popup to to be on top of other page content (including topbar),
* Changed usage of input/dropdown to input/select,
* No longer rely on use of global $CONFIG but usage of elgg_get_config() instead,
* Testing of path to ImageMagick commands no longer requires a / to be entered at the end of the path to work.

Contributors:

* iionly


Version 1.10.6 (Release Date: 31/01/2015)
-----------------------------------------

* Same code base as 1.9.6,
* Fix of deprecation issues occuring on Elgg 1.10 (namely changing output/confirmlink view to output/url view).

Contributors:

* iionly


Version 1.9.6 (Release Date: 31/01/2015)
----------------------------------------

* Same code base as 1.8.6 with necessary modifications to work on Elgg 1.9.

Contributors:

* iionly


Version 1.8.6 (Release Date: 31/01/2015)
----------------------------------------

* UI-improvements on thumbnails re-creation page (progress bar),
* Fine-tuning of sidebar entries with addition of "Latest comments" and "Tagcloud" blocks where appropriate.

Contributors:

* iionly


Version 1.9.5 (Release Date: 10/01/2015)
----------------------------------------

* Same code base as 1.8.5 with necessary modifications to work on Elgg 1.9.

Additionally:

* Fixed an error in 2014111701.php upgrade script on handling of ElggBatches that could have resulted in the upgrade getting stuck (script in new version is now 2014111801.php),
* River entries modified (target_guid of corresponding album added) for river entries connected to group albums to show up in lists of group activities,
* Upgrade script added for existing river entries to also show up in lists of group activities.

Contributors:

* iionly


Version 1.8.5 (Release Date: 10/01/2015)
----------------------------------------

* Fixed an error in 2013121301.php upgrade script on handling of ElggBatches that could have resulted in the upgrade getting stuck (script in new version is now 2013121401.php),
* Do not show "Upgrade" button on a new install of Tidypics,
* Added script for re-sizing all image thumbnails after changing thumbnail size settings (available on Thumbnail Creation tab on Tidypics plugin settings page). NOTICE: when changing the default thumbnail sized it's very likely that you need to make adjustments in Tidypics' CSS (that's for YOU to do),
* Corrections in group access check to prevent full view display of group albums and group images in hidden group to non-members of the group,
* Added "Upload photos" link to "Latest group photos" widget on group profile pages (without and with Widget Manager plugin in use),
* Display of filter tabs (no tab selected) and owner block when viewing the images of another user (i.e. made the siteimagesowner page to behave like pages of other type of content),
* Display the categories selected for a photo in its full view output,
* Image file extension "jpeg" added to list of allowed extension for html5 uploader,
* Allow tagging of all site members (including yourself) on an image,
* Prevent the photo to be opened in the lightbox popup while adding a tag,
* Added plugin setting to allow for restricting tagging of a photo to the owner of the photo (and admins) only,
* Change in tag labels for a better indication of difference between word-tags ("Tag(s): bla") and member tags ("Member: Mr. X (tagged by Mr. Y)"),
* Fixes in page views (siteimagesowner, siteimagesgroup, tagged) in case of missing guid on input or viewer is logged out,
* Added missing CSS classes for tagging borders again that were mistakenly removed in release 1.8.1beta14,
* French translations added.

Contributors:

* iionly
* Facyla


Version 1.9.4.1 (Release Date: 17/11/2014)
------------------------------------------

* Added Tidypics upgrade script to be executed after upgrading a site to Elgg 1.9.5 to catch any comments made on images and albums possibly not yet upgraded by Tidypics previously due to a bug in Elgg core resulting in the comments migration when upgrading from Elgg 1.8 left incomplete (fixed in Elgg 1.9.5).
BEFORE running the Tidypics upgrade (from Tidypics' settings page) check for any pending Elgg core upgrades and if there are any (especially comments migration!) FIRST run the core upgrades. Depending on the number of comments on your site the Tidypics upgrade might take a while to finish. In any case, make a database backup before running the Tidypics upgrade!

Contributors:

* iionly


Version 1.9.4 (Release Date: 07/10/2014)
----------------------------------------

* Same code base as 1.8.4 with necessary modifications to work on Elgg 1.9,
* Getting slideshow to work again (thanks to chenkai for providing some info in a discussion post on the community site that put me on the right track to fix it). As on Elgg 1.8 the slideshow also has a "No-Flash required" fallback now.

Contributors:

* iionly


Version 1.8.4 (Release Date: 07/10/2014)
----------------------------------------

* "No-Flash required" fallback for slideshow.

Contributors:

* iionly


Version 1.9.3 (Release Date: 05/10/2014)
----------------------------------------

* Same code base as 1.8.3 with necessary modifications to work on Elgg 1.9,
* Fix of group album handling. Group members (who are no admin) can upload images again to any group album (not only their own).

Contributors:

* iionly


Version 1.8.3 (Release Date: 05/10/2014)
----------------------------------------

* "Upload photos" / "Upload photos to this album" buttons hidden within group context for non-group members,
* "Upload photos" link removed from groups images profile module / widget (failed to work correctly, i.e. not open in a lightbox popup as desired),
* "Create album" link removed from groups images profile module / widget for for non-members of groups,
* Disable unintended text shadow within html5 uploader at least in some cases if this text styling has been enabled by other plugins and unwantedly inherited by plupload (can't prevent text shadow in all circumstances as a theme plugin might override Tidypics' CSS).

Contributors:

* iionly


Version 1.9.2 (Release Date: 06/09/2014)
----------------------------------------

* Same code base as 1.8.2 with necessary modifications to work on Elgg 1.9,
* Fix of group album handling. Group members (who are no admin) can upload images again to any group album (not only their own).

Contributors:

* iionly


Version 1.8.2 (Release Date: 06/09/2014)
----------------------------------------

* No longer beta! Apart from the things mentioned in the ToDo section everything should work. If not, please tell me,
* Rework of river activity settings (check the settings and make adjustments if necessary):
	- new option to set preview image size for all kind of Tidypics' river entries,
	- click on preview image in river now opens full size version of the image in a lightbox popup.

Contributors:

* iionly


Version 1.9.1beta16 (Release Date: 10/08/2014)
----------------------------------------------

* Same code base as 1.8.1beta16 with necessary modifications to work on Elgg 1.9,
* Allow sorting of images in queue before starting uploading using HTML5 uploader.

Contributors:

* iionly


Version 1.8.1beta16 (Release Date: 10/08/2014)
----------------------------------------------

* Fix in latest upgrade script that might resulted in not all database entries having been updated successfully (new "Upgrade" run necessary to complete),
* Fix for HTML5 uploader to correctly disable/enable the "Add files" button if the maximum number of allowed photos (or more) had been selected for upload,
* Using ElggBatch for image deletion when deleting an album (and its possibly numberous images) to avoid memory issues.

Contributors:

* iionly


Version 1.9.1beta15 (Release Date: 20/07/2014)
----------------------------------------------

* Same code base as 1.8.1beta15 with necessary modifications to work on Elgg 1.9 (fix of limitation to 10 images to be uploaded in one batch when using Plupload HTML5/HTML4 uploader),
* Fix of deprecated usage of getFriends() function on Elgg 1.9.

Contributors:

* iionly


Version 1.8.1beta15 (Release Date: 20/07/2014)
----------------------------------------------

* Fix of limitation to 10 images to be uploaded in one batch when using Plupload HTML5/HTML4 uploader.

Contributors:

* iionly


Version 1.9.1beta14 (Release Date: 09/06/2014)
----------------------------------------------

* Same code base as 1.8.1beta14 with necessary modifications to work on Elgg 1.9,
* Nicer UI theme for the HTML5/HTML4 uploader with list view or thumbnails preview (default) of image files in upload queue,
* Limit size of lightbox view to a maximum of 95% of width/height of window.

Contributors:

* iionly
* YaNoo
* Joaquín


Version 1.8.1beta14 (Release Date: 09/06/2014)
----------------------------------------------

* Uploadify flash uploader replaced by Plupload HTML5/HTML4 uploader (thanks to YaNoo for taking the initiative and providing a PR - otherwise you would have had to wait longer for me to implement it),
* Spanish language file added (provided by Joaquín).

Contributors:

* iionly
* YaNoo
* Joaquín


Version 1.9.1beta13 (Release Date: 02/04/2014)
----------------------------------------------

ATTENTION: before executing the upgrade script that comes with this version you should have finished the upgrade process of Elgg core from 1.8 to 1.9 if you are not starting on a fresh Elgg 1.9 installation. It's important that all existing comment annotations have already been converted to comment entities. And PLEASE BACKUP YOUR DATABASE before executing the Tidypics upgrade. The backup is important because the script might possibly take some time to finish depending on how many database entries are in need to be updated.

* Same code base as 1.8.1beta13 with necessary modifications to work on Elgg 1.9,
* The upgrade script that comes with this version does basically the same as the upgrade script included in 1.8.1beta13: comments formerly made on the activity page are assigned to the uploaded image (on single image uploads) or albums. This is necessary for all existing comments to show up in the same way as future comments. The comments will still be displayed on the activity page but in addition also automatically on image pages or album pages respectively. In addition to the changes done by the Elgg 1.8 version of Tidypics 1.8.1beta13 the version for Elgg 1.9 also restores the specific Tidypics comment views (with thumbnails) on the activity page that were changed to a default comments view by Elgg core when upgrading to 1.9.

Contributors:

* iionly
* Juho Jaakkola


Version 1.8.1beta13 (Release Date: 01/04/2014)
----------------------------------------------

ATTENTION: this new release contains an update script that changes database entries related to comments and likes made on Tidypics image upload river entries. Read the changelog carefully BEFORE running the upgrade to understand what it does and in any case make a database backup before executing the upgrade to be able to revert to the former state if you are not content with the result. The backup is also important because the script might possibly take some time to finish depending on how many database entries are in need to be updated.

* Code cleanup,
* Flash uploader: limit number of images that can be added in one go to 10,
* Fix on friends tab pages of "All Photos" and "All photo albums" to check if user has friends and display a fitting message if not instead of saying the friends would not have uploaded image yet (which shows when the user has friends but they have not yet uploaded images),
* Removed plugin setting to turn commenting on albums on/off. Commenting on albums is now always on,
* Commenting on image uploads on the Activity page (commenting on Tidypics_batch entities): when commenting on an upload of a single image the comment will be added to this image and when commenting on an upload of more than a single image the comment will be added to the corresponding album (in both cases the comment made will still be shown also on the activity page below this river entry),
* the same with liking image uploads entries on the Activity page: if a single image was uploaded this image will get the like and if more than a single image was uploaded the corresponding album will get the like (in both cases the like will also be shown on the activity page in the river menu of this entry),
* IMPORTANT!!!!!! Please read: upgrade script to assign existing comments and likes made on image upload river entries either to the corresponding image or album. This script makes the existing comments and likes consistent with the future comments and likes created on Tidypics 1.8.1beta13. The update script (mod/tidypics/upgrades/2013121201.php) does the folling:
	1. upgrading of comments on river entries that were made with Tidypics 1.8.0rc1 or earlier,
	2. slightly different procedure for upgrading comments on river entries made with a Tidypics 1.8.1betaXX version: for these comments a second database entry was created for the comment to show not only on the activity page but also on the albums' pages. The upgrade script identifies these second comment entries by the lack of corresponding river entries in the database and then deletes these entries. If you have by any means deleted entries on the activity page informing about comments made on album pages or if you prevent such entries to be created on your site somehow then these comments will also get deleted. Unfortunately, there's no other way of getting rid of the duplicate comments entries that are now no longer needed. If in doubt, comment out "Part 3" of the upgrade code in mod/tidypics/upgrades/2013121201.php.
	3. upgrading of likes on river entries: here's a check included if a user has already liked the album or image the like made to the river entry would get moved to. If there's not already an existing like the like will get moved from the river entry and added to the album/image. If the user has already liked the image or corresponding album the like will not get added to avoid duplicate likings.

Contributors:

* iionly
* Juho Jaakkola


Version 1.9.1beta12 (Release Date: 03/01/2014)
----------------------------------------------

* Same code base as 1.8.1beta12 with necessary modifications to work on Elgg 1.9,
* addtional Elgg 1.9 specific changes:
	- Fix of some deprecation issues that turned up on Elgg 1.9,
	- Fix of "Recently commented  photos" and "Most commented..." pages to work again on Elgg 1.9 (necessary due to the change in Elgg 1.9 of handling comments as ElggComment entities instead of annotations),
	- Fix of river comment entries to optionally include a thumbnail of the image / the album cover to work again on Elgg 1.9 (ATTENTION: only new river entries will show the thumbnail images automatically. For getting existing river entries - especially entries created on Elgg 1.8 previously - to also show the thumbnail images again you will have to execute an upgrade script. You can execute this script by clicking on the "Upgrade" button on the Tidypics settings page. BEFORE executing the Tidypics-specific upgrade FIRST execute any outstanding upgrades of Elgg 1.9 core - especially the migration of all comment annotations to the new Elgg comment objects!!!).

Contributors:

* iionly


Version 1.8.1beta12 (Release Date: 02/01/2014)
----------------------------------------------

* Added placeholder images to be displayed in case no images have been uploaded to an album yet in the image sizes previously missing,
* On deletion of an album the corresponding album folder in data directory gets deleted and no longer the (empty) album folder remains,
* Flash uploader fixed in the case of group albums when someone else than the album creator wants to upload images to a group album,
* Navigation arrows hidden if an album contains only a single image,
* Correction of title of group pages "Most recent albums" widget,
* "View all" link in Latest Photos widget on profile pages working for site visitors not logged in,
* Fixed list of offered existing albums to select from for image uploads when in group context,
* Fixed display of image and album gallery pages when images or albums exist that belong to groups with restricted access (The images or albums shown in the gallery pages depend on the viewing user having the necessary right for viewing depending on the access level defined for these albums including the images within these albums. For example a user gets to see all albums with "public" access level regardless if logged in or not. But if you set the access level "public" or "logged in" for a group album this results in even a non-group member being able to get access to such albums and their content. But if the group itself is a restricted group certain problems arise when this group contains "public" or "logged-in" content. In case of the gallery views within Tidypics the outcome is a fatal error occuring on these pages. This fix avoids the fatal error from happening. Still the group images and albums of restricted albums are included in the listings due to the access level set for them. If you don't want any albums or images of restricted groups to be seen by non-group-members you must set the access level of these albums to the corresponding group's level).

Contributors:

* iionly


Version 1.8.1beta11 (Release Date: 01/09/2013)
----------------------------------------------

* Some general code cleanup,
* Fix of river entries appearing twice on image uploads in case the Flash uploader is used and the plugin option is set to create separate entries for each uploaded image (issue introduced in beta10),
* Added TidypicsBatch class (that extends ElggObject class) used for creation of objects of subtype "tidypics_batch" (used for handling "batches" of uploaded images) instead of creation the objects as ElggObject and assinging the subtype,
* Improvements on slideshow:
	- a slideshow can be started on all pages that display a suitable list of images (but the slideshow feature is only available if the slideshow plugin option introduced in beta10 is enabled in the plugin settings),
	- start of slideshow via title menu button,
	- slideshow will include the next 64 images (i.e. 5 pages of images) of the current displayed image list taking into account the current page offset (i.e. on page 1 the slideshow will display pages 1-5 while on page 10 it will display the images of pages 10-14 etc.). (Longtime goal for future Tidypics versions: no limitation of number of images in slideshow and most likely replacing the PicLensLite slideshow by something else / something better. Currently, the number of images to be included in a slideshow is somewhat limited by avoiding running into memory issues. Also, the PicLensLite slideshow library requires the Flash plugin on client browsers which is annoying and the 3D wall feature does no longer work),
* Improvements on image orientation correction at image uploading:
	- using best methods available depending on image library selected,
	- update orientation information saved in image file after a change of image orientation if the image library used supports this (GD library unfortunately does not support it but the exif info saved in the image file is lost on image orientation correction anyway),
	- support of orientation correction not only of rotated but also of mirrowed (and possibly additionally rotated) images,
	- some remarks regarding which image library to use for Tidypics:
* if possible and available on your server use the "ImageMagick executable". Generally, this library has a much smaller memory requirement compared to the GD library both for image resizing (i.e. creation of thumbnail preview images) and orientation correction of images. Additionally, the exif information saved in an image file will be preserved both during resizing and orientation correction processing,
* next best choice after "ImageMagick executable" is the "imagick PHP extension". It also has a low memory consumption compared to the GD library but you might lose exif information during image processing,
* the GD library should be available on any server (as Elgg core requires it anyway). The memory requirement of the GD library can be quite high both for creation of thumbnails and image orientation corrections. The memory requirement is depending not on the image file size in the first place but on image resolution, color depth per pixel and color channels per pixel (so even a small sized image file might require more memory than available on the server). If you use the GD library for Tidypics on your server, your users might not be able to upload larger images. Additionaly, exif information saved in the image files might get lost during image orientation correction.

Contributors:

* iionly


Version 1.9.1beta10 (Release Date: 17/08/2013)
----------------------------------------------

* Same code base as 1.8.1beta10 with necessary modifications to work on Elgg 1.9.

Contributors:

* iionly


Version 1.8.1beta10 (Release Date: 17/08/2013)
----------------------------------------------

* Some preparations for compatibility with Elgg 1.9 (currently it looks like I will have to release a version for Elgg 1.9 separately though),
* Replacement of a deprecated function,
* Small improvement in Flash uploader error handling,
* New plugin option: use of slideshow optional,
* Fixed check of memory requirement for image re-sizing on upload when using GD php extension,
* Slightly better catching of missing images / thumbnail situations,
* Improved image orientation correction on image upload. When using GD library it will only be done when memory requirement is fullfilled. Additionally, Imagick php extension or ImageMagick library is used when defined as image library in Tidypics plugin settings,
* New tab on Tidypics plugin settings: image deletion by providing GUID of image (in case the image entry can't be deleted via site front-end),
* Includes the following changes in Tidypics from official Tidypics repo at https://github.com/cash/Tidypics:
	- correction of text in notifications about image uploads in case the uploader is not the owner of the album.

Contributors:

* iionly
* Jerome Bakker


Version 1.8.1beta9 (Release Date: 26/06/2013)
---------------------------------------------

* Fixed php syntax error introduced in beta8 preventing group profile pages to be rendered (thanks to Pasley70 for reporting).

Contributors:

* iionly
* Pasley70


Version 1.8.1beta8 (Release Date: 25/06/2013)
---------------------------------------------

* Requires Elgg 1.8.16 due to bugfix https://github.com/Elgg/Elgg/issues/5564 for the pagination on list pages to work,
* Pagination support for the list pages (like "Most views" / "Recently commented" etc.) to show more than only a hardcoded number of photos in each list view,
* List pages (like "Most views" / "Recently commented" etc.) to work correctly when logged out and to show only photos that the viewer is allowed to see based on access level settings,
* "All", "Friends", "Mine" tabs hidden on "All photos" page when logged-out,
* "Upload photos" button hidden when logged-out,
* "Photos you are tagged in" sidebar entry hidden when logged-out,
* "Tag" entity menu entry hidden when logged out,
* "Photos you are tagged in" page revised,
* List of members tagged in a image in sidebar when viewing an image (by including a code snippet of the Tagged People plugin by Kevin Jardine),
* Fix in image and album save actions for deleting all image/album tags to work (referring to the usual Elgg Entity tags),
* Improvements in handling Tidypics user and word tags of images (including CSS improvements) to play well together with the Image entidy tags (avoiding double tags to be added, removal of corresponding Image entity tags when an Tidypics image word tag is removed),
* River entry on adding word tags to an image,
* Includes the following changes in Tidypics from official Tidypics repo at https://github.com/cash/Tidypics:
	- made the albums notifications overridable rather than calling object_notifications() directly,
	- fixed: security issue with showing malicious exif data.

Contributors:

* iionly
* Cash Costello
* Kevin Jardine
* Jerome Bakker


Version 1.8.1beta7 (Release Date: 20/05/2013)
---------------------------------------------

* auto-correction of image orientation on image upload (thanks to Jimmy Coder for the code snippet for image rotation),
* word tags (as opposed to tagging a user): tags that don't correspond with a username will be added to the tags of the photo (searchable),
* Includes the following changes in Tidypics from official Tidypics repo at https://github.com/cash/Tidypics:
	- set tiny size for sites that may not have it set (e.g. possibly sites updated from Elgg 1.6) (by Cash Costello),
	- stripping non word characters from title when pulled from image filename (by Cash Costello),
	- added tagging to river with notification to user (by Cash Costello, Kevin Jardine).

Contributors:

* iionly
* Cash Costello
* Kevin Jardine
* Jimmy Coder


Version 1.8.1beta6 (Release Date: 28/04/2013)
---------------------------------------------

* Fix for Tidypics to work in Elgg 1.8.15 (creating new albums),
* Updated uploadify flash uploader to version 3.2 (this might only be a preliminary solution as I might need to switch to another flash (html5) uploader as the Uploadify uploader has some limitations and also seems no longer fully supported),
* Fixed some deprecated function calls (they were not in actively used code but some people might have wondered about it nonetheless as the Code Analyzer plugin gave some warnings about them),
* Fixed html code in widgets' content.php for better theme compatibility (as suggested by ura soul).

Contributors:

* iionly


Version 1.8.1beta5 (Release Date: 01/04/2013)
---------------------------------------------

* Fix in river entry creation (hopefully last fix necessary for now...).

Contributors:

* iionly


Version 1.8.1beta4 (Release Date: 26/03/2013)
---------------------------------------------

* River entries code reworked (solution introduced in beta3 did not work as intended),
* Option to include preview images in river entries when comments were made on albums and images,
* Fix a few errors in language files (en and de),
* Permission handling of tidypics_batches: on permission change of an album the permissions of corresponding tidypics_batches are changed to same new permission,

Contributors:

* iionly


Version 1.8.1beta3 (Release Date: 03/17/2013)
---------------------------------------------

* River entries fixed (note: commenting on existing "batch" river entries does not work. It will only work for river entries created after upgrading to 1.8.1beta3!).

Contributors:

* iionly


Version 1.8.1beta2 (Release Date: 03/10/2013)
---------------------------------------------

* Fixed quota support,
* Fixed issue with image entries (without images available) getting created on failed image uploads,
* Fixed an issue introduced in beta1 that resulted in (harmless but many) log entries getting created,
* Fixed Highest vote counts page,
* Display of Elggx Fivestar rating widget defined via Elggx Fivestar default view (requires version 1.8.3 of Elggx Fivestar plugin).

Contributors:

* iionly


Version 1.8.1beta1 (Release Date: 03/05/2013)
---------------------------------------------

* Removal of option to set access level for images. Images always get the same access level as the album they are uploaded to. On changing the access level of an album all its images get assigned the same access level, too,
* New plugin navigation / pages: more centered on (recent) images than albums,
* Support of Widget Manager index page and groups' pages widgets,
* Fivestar voting widget included on detailed image views,
* Some code-cleanup.

Contributors:

* Cash Costello
* Brett Profitt
* Kevin Kardine
* Sem (sembrestels)
* Steve Clay
* Luciano Lima
* iionly


Version 1.8.0 RC1 (Release Date: 07/14/2012)
--------------------------------------------

* Updated for Elgg 1.8

Contributors:

* Cash Costello
* Brett Profitt


Version 1.7.3 (Release Date: 11/09/2011)
----------------------------------------

* Removed admin settings in favor of Tidypics Administration
* Add two river strings for those using Elgg 1.8
* Fixed bug where the batch object was not being deleted when had 0 images


Version 1.7.2 (Release Date: 10/11/2011)
----------------------------------------

* Fixed bug with admin tabs
* Fixed bug with pagination on all site albums page
* New installs get default settings automatically added
* Added a server check for cookie-only sessions


Version 1.7.1 (Release Date: 07/10/2011)
----------------------------------------

* Added a toggle for enabling the Flash uploader
* Fixed bug with slideshow not displaying all images in an album
* Fixed bug with only 8 images showing on an album page. Default is 16.


Version 1.7.0 (Release Date: 06/05/2011)
----------------------------------------

* Add Flash uploader
* Added album sorting
* Added batch upload river entries
* Fixed bug where old installs of Tidypics would not upgrade
* Fixed bug in activity river with link on image entry
* Fixed tag pop-up box display issue
* Fixed display of avatars in tag river entries
* Fixed 2 widget bugs
* Fixed bug with images that have national characters in filename

Contributors:

* Cash Costello
* Jeff Tilson
* Original Flash code by Torsten Wesolek
* language files submitted by gillie and lord55


Version 1.6.8 (Release Date: 05/01/2010)
----------------------------------------

* New language strings: tidypics:nophotosingroup, tidypics:baduploadform, tidypics:settings:heading:img_lib, tidypics:settings:heading:main, tidypics:settings:heading:river, tidypics:settings:heading:sizes, tidypics:settings:heading:groups
* Fixed bug in titles of albums RSS
* Added a new css element: tidypics_line_break
* Fixed layout of album covers due to long titles or other text
* Fixed some bugs with image resizing when images are wide and short
* Improved interface of admin settings


Version 1.6.7 (Release Date: 04/24/2010)
----------------------------------------

* Added categories integration
* Added a better quota display message - includes percentage now
* Tweaked the css so that upload list is enumerated (#tidypics_image_upload_list)


Version 1.6.6 (Release Date: 03/06/2010)
----------------------------------------

* Tweaked slideshow start code
* Fixed bug with delete tags menu item
* Fixed bug in en.php
* Better error checking for ImageMagick resizing


Version 1.6.5 (Release Date: 12/12/2009)
----------------------------------------

* Bug fixes
* Better plugin hooks for adding slideshows and lightboxes
* Better display of album pages and tweaked css
* Slideshows available on more pages
* Made a change to parameters in tp_list_entities - added container
* Added Danish translation from erikernstm
* Added French translation from Fx Nion


Version 1.6.4 (Release Date: 10/05/2009)
----------------------------------------

* Bug fixes
* Improved watermarking
* Add slideshow code by Torsten


Version 1.6.3 (Release Date: 09/13/2009)
----------------------------------------

* Bug fixes
* Redo image resize if problem occurred
* Grab title from image by default
* New German language file by alfalive
* Preview of watermarking


Version 1.6.2 (Release Date: 09/03/2009)
----------------------------------------

* Added widget for user's latest photos
* Added notifications to a user if that user is tagged in a photo
* Fixed some issues with tagging people in albums that belong to a closed group
* Added a test page for ImageMagick commandline
* Began restructuring the code for future capabilities
* Many more bug fixes and tweaks


Version 1.6.1 (Release Date: 08/04/2009)
----------------------------------------

* Fixed css bug that caused problems with tagging
* Added Spanish language file from mylamilagros


Version 1.6.0 (Release Date: 08/02/2009)
----------------------------------------

* Photo tagging
* View counter
* EXIF view
* ImageMagick support
* Extensive admin settings
* Improved CSS
* Image ratings
* Upload quotas
* Better album RSS feed
* better almost everything

Contributors:

* Cash Costello
* Greg Froese
* tagging based on code by Pedro Prez
* RSS improvements by Torsten Wesolek
* language files submitted by Toto and Susan Tsairi


Version 1.5.1 (Release Date: 03/29/2009)
----------------------------------------

* Updated Turkish language file
* Fixed permissions bug on all content caused by group override
* Added back the create album button to widgets

Contributors:

* Gabriel Monge-Franco (http://gabriel.mongefranco.com)
* Cash Costello
* VeniVidiVinco (http://community.elgg.org/pg/profile/VeniVidiVinco)


Version 1.5 (Release Date: 03/28/2009)
--------------------------------------

* Fixed submenus on sidebar of album pages to make them consistent
* Fixed display issues for Elgg 1.5
* Using default site access now
* Pushing new album creation to river
* Fixed German language file
* Added Turkish
* Added notifications for new album creation
* Rewrote most of the page handlers to make cleaner
* Fixed the access level bug on images
* Cleaned up css
* Fixed the group access bug on albums

Contributors:

* Gabriel Monge-Franco (http://gabriel.mongefranco.com)
* Cash Costello
* alfalive (http://community.elgg.org/pg/profile/alfalive)
* VeniVidiVinco (http://community.elgg.org/pg/profile/VeniVidiVinco)

Also thank you to those who tested the code in svn and provided feedback


Version 1.08.2 (Release Date: 02/13/2008)
-----------------------------------------

* Fixed bug introduced in v1.08.1 that broke the picture upload (thanks to Karsten Schulze).
* Fixed empty variables in several files that were supposed to send the user back to the previous page, but didn't.
* Cleaned up change log (contributions.txt).
* Finally fixed the Polish language file!!! Yay!! :)
* TODO: Work around large image (high resolution) limit when creating thumbnails (an Elgg limitation... can probably be fixed by using PHP GD functions directly or ImageMagic if available)
	- The problem is with get_resized_image_from_existing_file().  Submitted a ticket to the Elgg tracking bug system.
	- Edit actions/upload.php when done. There is a dirty hack in place for now that needs to be removed once the above bug is fixed.
* TODO: disable public by default (input/accessRead.php) -- add setting to admin page that lets the site admin decide whether pictures can be public or not.
* TODO: allow group members to add pictures to group photo albums
* TODO: implement photo anotations
* TODO: look into replacing individual image views with lightbox2 or jQuery lightbox album views.
* TODO: create a new widget to show pictures (in slideshow) in a user's profile.
* TODO: add settings for group albums so that the group owner can select the number of albums to show.
* TODO: implement a way to move pictures from one album to another (should be pretty easy).
* TODO: add an "Add Photos" option to the user widget similar to the one in the group widget.
* TODO: implement automagic file resizing to meet the admin's maximum resolution and file size.
* OF NOTE: It is currently not possible to allow group members to edit an album created by another group member.  This is a bug with group permissions and it will probably not be fixed until [at least] Elgg v1.5 comes out.

Contributors:

* Gabriel Monge-Franco (http://gabriel.mongefranco.com)


Version 1.08.1 (Release Date: 02/13/2008)
-----------------------------------------

* Fixed bug introduced in v1.08 that caused fake files to be created during thumbnail creation (thanks to Karsten Schulze).
* Reverted to old directory structure that saves pictures to /image/ALBUMGUID/picGUID (v1.08 saved to /image/ALBUMGUID__picGUID, thus keeping everything in one folder).
* Album directory is now deleted when the album is deleted (along with every picture inside of the album).
* Reverted thumbnail and small thumbnail to use picture cropping instead of scaling, so that sites that already use Tidypics can keep a consisting look and feel.
* Completed River integration by moving album and image directories to an "object" sub-directory (thanks to LKLaRose).
* Added status messages/graphics to give the user some feedback.
* Fixed bug in profile widget whereby the selected number of albums had no effect (thanks to @Webgalli and @cheltenham).
* Fixed bug introduced in v1.06 that prevented anonymous users from viewing a user's album (thanks to Karsten Schulze).
* Fixed more language file bugs (thanks to Karsten Schulze).
* Administrators can now set a file size limit from the plugin configuration (it has to be in Kilobytes).
* JUST PLAIN WEIRD:  Fixed Polish language file (thanks to @Vazco, Ian Medlock and Brett Profitt) and saved as UTF8 without BOM. However, it still doesn't work. Can somebody try saving it on a Polish box for me? :)
* TODO: fix Polish language file -- it seems to break the whole Elgg site! Maybe it needs to use HTML codes in place of international characters?
* TODO: Work around large image (high resolution) limit when creating thumbnails (an Elgg limitation... can probably be fixed by using PHP GD functions directly or ImageMagic if available)
	- The problem is with get_resized_image_from_existing_file().  Submitted a ticket to the Elgg tracking bug system.
	- Edit actions/upload.php when done. There is a dirty hack in place for now that needs to be removed once the above bug is fixed.
* TODO: disable public by default (input/accessRead.php) -- add setting to admin page that lets the site admin decide whether pictures can be public or not.
* TODO: allow group members to add pictures to group photo albums
* TODO: implement photo anotations
* TODO: look into replacing individual image views with lightbox2 or jQuery lightbox album views.
* TODO: create a new widget to show pictures (in slideshow) in a user's profile.
* TODO: add settings for group albums so that the group owner can select the number of albums to show.
* TODO: implement a way to move pictures from one album to another (should be pretty easy).
* OF NOTE: It is currently not possible to allow group members to edit an album created by another group member.  This is a bug with group permissions and it will probably not be fixed until [at least] Elgg v1.5 comes out.

Contributors:

* Gabriel Monge-Franco (http://gabriel.mongefranco.com)
* LKLaRose (http://community.elgg.org/pg/profile/lauren)
* Webgalli (http://community.elgg.org/pg/profile/webgalli)
* Karsten Schulze (http://ks.frinx.eu)
* Cash (http://community.elgg.org/pg/profile/costelloc)


Version 1.08 (Release Date: 02/08/2008)
---------------------------------------

* Merged most (safe) changes made by other contributors in v1.07.
	- Did not include SWFuploader or JQuery due to the number of bugs reported.
* Changed ugly "new album" picture into something better looking.
* Fixed bug whereby image objects were deleted from the database, but they physical files remained on the server.
	- Since deleting directories was not possible without the use of unsafe file operations, albums no longer create new directories.  Instead, all pictures are saved as /image/ALBUMGUID__picturename.
* Fixed some bugs in the English, Spanish and German language files and added missing error messages.
* Thumbnails now display the default error image (same as new album) when the requested image cannot be found.
* Fixed a bug in the multi-edit form that did not allow image titles to be saved.
* Removed some customizations made to edit.php action in v1.07 since they removed the ability to add titles to images.
* Fixed bug introduced in v1.07 that prevented images from being set as album covers.
* Fixed miscellaneous bugs in group albums widget.
* Removed jQuery for now since it was making the albums too slow.  In the future, we should look into replacing individual image views with lightbox2 or jQuery lightbox album views.
* TODO: fix Polish language file -- it seems to break the whole Elgg site! Maybe it needs to use HTML codes in place of international characters?
* TODO: Work around 0.9MB source file size limit when creating thumbnails (an Elgg limitation... can probably be fixed by using PHP GD functions directly)
	- The problem is with get_resized_image_from_existing_file().  Submitted a ticket to the Elgg tracking bug system.
	- Edit actions/upload.php when done. There is a dirty hack in place for now that needs to be removed once the above bug is fixed.
* TODO: disable public by default (input/accessRead.php) -- add setting to admin page that lets the site admin decide whether pictures can be public or not.
* TODO: allow group members to add pictures to group photo albums
* TODO: implement photo anotations
* TODO: look into replacing individual image views with lightbox2 or jQuery lightbox album views.
* OF NOTE: It is currently not possible to allow group members to edit an album created by another group member.  This is a bug with group permissions and it will probably not be fixed until [at least] Elgg v1.5 comes out.

Contributors:

* Gabriel Monge-Franco (http://gabriel.mongefranco.com)


Version 1.07 (Release Date: 02/03/2008)
---------------------------------------

* About 10 missing translations added
* Translated to polish
* When no album is present, user can add a new album straight from the widget if he has the required rights
* Added some missing `<p></p>`
* Changed some `<?` to `<?php`
* Unauthorized album edit taken care of
* Added jQuery Lightbox support, but commented out just in case someone won't want to use it (there may be some problems with the lightbox, since I'm not using it myself and I didn't test it)

Contributors:

* vazco (http://community.elgg.org/pg/profile/vazco)
* simophin (http://community.elgg.org/pg/profile/simophin)


Version 1.06 (Release Date: 02/03/2008)
---------------------------------------

* Forward all non-logged in users to World (public) pictures. This fixes a bug in which anonymous users would see a list of pictures titled, "'s pictures" (without a name).
* Forward requests to "owned" without an user ID to "owned/userid" when a user is logged in. This fixes a bug in which all users would see a list of pictures titled, "'s pictures" (without a name).
* Replaced several hard-coded strings to elgg_echo() functions so they can be translated.
* Re-enabled title entry in picture editing. Titles are only optional, so there is no reason to hide them, especially if some users may find them useful.  Moreover, lack of image titles makes list views awkward.
* Fixed multi-picture editing bug in which editing was disabled after uploading multiple pictures.
* Fixed several tags not conforming to standard PHP opening tags.
* Fixed some bugs in the English language file.
* Added Spanish and German translations (if you speak German, please double-check the language file!!!).
* Added a download link at the bottom of each picture to download the original file.
* Updated some icons and created missing ones.
* TODO: disable public by default (input/accessRead.php) -- add setting to admin page that lets the site admin decide whether pictures can be public or not.
* TODO: change ugly "new album" picture into something better looking.
* TODO: re-organize files to clean up the plug-in directory (e.g., move world.php to views/default)
* TODO: Fix bug whereby image objects are deleted from the database, but the physical files remain on the server.  The path can be found with $file->getFilename(), but would it be safe to execute shell commands directly???

Contributors:

* Gabriel Monge-Franco (http://gabriel.mongefranco.com)
